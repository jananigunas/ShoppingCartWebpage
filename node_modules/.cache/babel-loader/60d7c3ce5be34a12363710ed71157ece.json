{"ast":null,"code":"const initState = {\n  isLoading: true,\n  items: [],\n  itemsInCart: [],\n  cartValue: 0,\n  error: null\n};\n\nconst cartReducer = (state = initState, action) => {\n  if (action.type === 'FETCH_FROM_API') {\n    fetch('https://shopping-cart-demo-api.herokuapp.com/products').then(resp => resp.json()) // .then(data => this.setState({ items: data, isLoading: false }))\n    // .catch(error => this.setState({ error, isLoading: false }))\n    .then(data => {\n      return { ...state,\n        items: data,\n        isLoading: false\n      };\n    }).catch(error => {\n      return { ...state,\n        error: error,\n        isLoading: false\n      };\n    });\n  }\n\n  if (action.type === 'ADD_PRODUCT_TO_CART') {\n    console.log(\"state.items\", state.items);\n    const itemAdded = state.items.find(item => item.partId === action.id);\n    const itemExistsInCart = state.itemsInCart.find(item => item.partId === action.id);\n\n    if (itemExistsInCart) {\n      itemAdded.quantity += 1;\n      return { ...state,\n        cartValue: state.cartValue + itemAdded.priceValue\n      };\n    } else {\n      itemAdded.quantity = 1;\n      const newCartValue = state.cartValue + itemAdded.priceValue;\n      return { ...state,\n        itemsInCart: [...state.itemsInCart, itemAdded],\n        cartValue: newCartValue\n      };\n    }\n  } else {\n    console.log(\"state.items\", state.items);\n    return state;\n  }\n};\n\nexport default cartReducer;","map":{"version":3,"sources":["/Users/jg066499/Documents/Project/Shopping-Cart/src/Reducers/cartReducer.js"],"names":["initState","isLoading","items","itemsInCart","cartValue","error","cartReducer","state","action","type","fetch","then","resp","json","data","catch","console","log","itemAdded","find","item","partId","id","itemExistsInCart","quantity","priceValue","newCartValue"],"mappings":"AAAA,MAAMA,SAAS,GAAG;AACdC,EAAAA,SAAS,EAAE,IADG;AAEdC,EAAAA,KAAK,EAAE,EAFO;AAGdC,EAAAA,WAAW,EAAC,EAHE;AAIdC,EAAAA,SAAS,EAAE,CAJG;AAKdC,EAAAA,KAAK,EAAE;AALO,CAAlB;;AAOA,MAAMC,WAAW,GAAE,CAACC,KAAK,GAAGP,SAAT,EAAoBQ,MAApB,KAA6B;AAC5C,MAAGA,MAAM,CAACC,IAAP,KAAgB,gBAAnB,EAAoC;AAChCC,IAAAA,KAAK,CAAC,uDAAD,CAAL,CACCC,IADD,CACMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADd,EAED;AACA;AAHC,KAICF,IAJD,CAIMG,IAAI,IAAI;AACV,aAAO,EACH,GAAGP,KADA;AAEHL,QAAAA,KAAK,EAAEY,IAFJ;AAGHb,QAAAA,SAAS,EAAE;AAHR,OAAP;AAKH,KAVD,EAWCc,KAXD,CAWOV,KAAK,IAAI;AACZ,aAAO,EACH,GAAGE,KADA;AAEHF,QAAAA,KAAK,EAAEA,KAFJ;AAGHJ,QAAAA,SAAS,EAAE;AAHR,OAAP;AAKH,KAjBD;AAkBH;;AAED,MAAGO,MAAM,CAACC,IAAP,KAAgB,qBAAnB,EAAyC;AACzCO,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BV,KAAK,CAACL,KAAjC;AACI,UAAMgB,SAAS,GAAGX,KAAK,CAACL,KAAN,CAAYiB,IAAZ,CAAiBC,IAAI,IAAIA,IAAI,CAACC,MAAL,KAAgBb,MAAM,CAACc,EAAhD,CAAlB;AACA,UAAMC,gBAAgB,GAAGhB,KAAK,CAACJ,WAAN,CAAkBgB,IAAlB,CAAuBC,IAAI,IAAIA,IAAI,CAACC,MAAL,KAAgBb,MAAM,CAACc,EAAtD,CAAzB;;AACA,QAAGC,gBAAH,EAAoB;AAChBL,MAAAA,SAAS,CAACM,QAAV,IAAsB,CAAtB;AACA,aAAO,EACH,GAAGjB,KADA;AAEHH,QAAAA,SAAS,EAAEG,KAAK,CAACH,SAAN,GAAkBc,SAAS,CAACO;AAFpC,OAAP;AAIH,KAND,MAOI;AACAP,MAAAA,SAAS,CAACM,QAAV,GAAqB,CAArB;AACA,YAAME,YAAY,GAAGnB,KAAK,CAACH,SAAN,GAAkBc,SAAS,CAACO,UAAjD;AACA,aAAO,EACH,GAAGlB,KADA;AAEHJ,QAAAA,WAAW,EAAE,CAAC,GAAGI,KAAK,CAACJ,WAAV,EAAuBe,SAAvB,CAFV;AAGHd,QAAAA,SAAS,EAAEsB;AAHR,OAAP;AAKH;AACJ,GApBD,MAqBI;AACJV,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BV,KAAK,CAACL,KAAjC;AACI,WAAOK,KAAP;AACH;AACJ,CA/CD;;AAiDA,eAAeD,WAAf","sourcesContent":["const initState = {\n    isLoading: true,\n    items: [],\n    itemsInCart:[],\n    cartValue: 0,\n    error: null,\n}\nconst cartReducer= (state = initState, action)=>{\n    if(action.type === 'FETCH_FROM_API'){\n        fetch('https://shopping-cart-demo-api.herokuapp.com/products')\n        .then(resp => resp.json())\n       // .then(data => this.setState({ items: data, isLoading: false }))\n       // .catch(error => this.setState({ error, isLoading: false }))\n        .then(data => {\n            return {\n                ...state,\n                items: data,\n                isLoading: false\n            }\n        })\n        .catch(error => {\n            return {\n                ...state,\n                error: error,\n                isLoading: false\n            }\n        })\n    }\n\n    if(action.type === 'ADD_PRODUCT_TO_CART'){\n    console.log(\"state.items\", state.items);\n        const itemAdded = state.items.find(item => item.partId === action.id);\n        const itemExistsInCart = state.itemsInCart.find(item => item.partId === action.id);\n        if(itemExistsInCart){\n            itemAdded.quantity += 1;\n            return {\n                ...state,\n                cartValue: state.cartValue + itemAdded.priceValue\n            }\n        }\n        else{\n            itemAdded.quantity = 1;\n            const newCartValue = state.cartValue + itemAdded.priceValue;\n            return {\n                ...state,\n                itemsInCart: [...state.itemsInCart, itemAdded],\n                cartValue: newCartValue\n            }\n        }\n    }\n    else{\n    console.log(\"state.items\", state.items);\n        return state;\n    }   \n}\n\nexport default cartReducer;"]},"metadata":{},"sourceType":"module"}